# 빌드 툴의 역할

1. HTML의 \<script type="module">에 넣을 ‘주요(main)’ 모듈(‘진입점’ 역할을 하는 모듈)을 선택합니다.
2. ‘주요’ 모듈에 의존하고 있는 모듈 분석을 시작으로 모듈 간의 의존 관계를 파악합니다.
3. 모듈 전체를 한데 모아 하나의 큰 파일을 만듭니다(설정에 따라 여러 개의 파일을 만드는 것도 가능합니다). 이 과정에서 import문이 번들러 내 함수로 대체되므로 기존 기능은 그대로 유지됩니다.
4. 이런 과정 중에 변형이나 최적화도 함께 수행됩니다.
   - 도달 가능하지 않은 코드는 삭제됩니다.
   - 내보내진 모듈 중 쓰임처가 없는 모듈을 삭제합니다(가지치기(tree-shaking)).
   - console, debugger 같은 개발 관련 코드를 삭제합니다.
   - 최신 자바스크립트 문법이 사용된 경우 바벨(Babel)을 사용해 동일한 기능을 하는 낮은 버전의 스크립트로 변환합니다.
   - 공백 제거, 변수 이름 줄이기 등으로 산출물의 크기를 줄입니다.

번들링 툴을 사용하면 스크립트들은 하나 혹은 여러 개의 파일로 번들링 됩니다. 이때 번들링 전 스크립트에 있던 import, export문은 특별한 번들러 함수로 대체됩니다. 번들링 과정이 끝나면 기존 스크립트에서 import, export가 사라지기 때문에 type="module"이 필요 없어집니다. 따라서 아래와 같이 번들링 과정을 거친 스크립트는 일반 스크립트처럼 취급할 수 있습니다.

# 번들러란?

# Webpack사용이유

ES6 모듈을 사용해 클라이언트 사이드 js에서도 동작하는 모듈 기능을 사용할 수 있다. 하지만 아직까지 모든 브라우저에서 지원하지 않기 때문에 브라우저와 무관하게 사용할 수 있는 모듈이 필요하다. (브라우저의 모듈 지원 상황은 [여기](https://caniuse.com/?search=module)에서 볼 수 있다.)

1. 여러개의 파일을 하나로 묶어주기 때문에 네트워크 접속의 부담을 줄 일 수 있다.
   - 초기 로딩 속도 줄임
   - 기본적으로 필요한 자원은 미리 로딩하는게 아니라 그 때 그 때 요청하자는 철학을 갖고 있음
   - 웹팩의 Code Splitting 기능을 이용하여 원하는 모듈을 원하는 타이밍에 로딩가능
2. 여러개의 서로 다른 패키지들이 서로 같은 이름의 전역 변수를 사용하면 에러가 날 수 있다. 이런 문제를 극복하기 위해서 등장한 것이 모듈인데, 웹팩은 아직 최신 기술이라서 적용하기가 애매한 기술인 모듈을 오래된 브라우저에서도 사용할 수 있게 도와준다.
3. 웹팩에는 매우 많은 플러그인들이 존재하는데, 이런 플러그인을 이용하면 웹개발시에 필요한 다양한 작업을 자동화 할 수 있다.
   - 코드 수정 후 브라우저 새로고침
   - html,css,js 압축
   - 이미지 압축
   - css 전처리기 변환

# webpack이전 상태와 모듈

아래와 같은 폴더구조일 때, 네트워크 탭을 보면 많은 파일들을 다운로드함. 한 페이지도 안되는 스크립트파일과 css파일을 다운로드하는게 이정도인데, 훨씬 많은 파일들을 다운로드하면 네트워크 커넥션이 그만큼 많아지고 더 많은 컴퓨팅 파워를 사용해야함. 그에 따라 서비스 성능이 나빠질 수 있음.

![파일구조예시](https://user-images.githubusercontent.com/71386219/158100123-dc5f7f3c-d6b2-40b9-a1d0-c5fc795ea2d0.png)

![웹팩이전네트워크](https://user-images.githubusercontent.com/71386219/158100350-5add6d23-7e0c-4d16-9f1a-4073ee181f0b.png)

🔍 참고자료

- [modules - javascript.info](https://ko.javascript.info/modules)
- [웹팩의 기본 개념 - 김정환 블로그](https://jeonghwan-kim.github.io/js/2017/05/15/webpack.html)
- [webpack 공식문서](https://webpack.kr/concepts/)
- [생활코딩 - webpacl](https://opentutorials.org/module/4566)
- [웹팩 핸드북 - Captain Pangyo](https://joshua1988.github.io/webpack-guide/)
