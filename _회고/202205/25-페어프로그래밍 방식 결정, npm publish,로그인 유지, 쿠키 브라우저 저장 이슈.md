# 20220525

<details>
<summary>시간대별 정리</summary>
### 오전

프로젝트 위키 정리

컴포넌트 설계

페어 프로그래밍 방식 결정

### 오후

모달컴포넌트 npm 배포

pr 제출

### 저녁

npm publish문제해결

로그인 유지 기능: 쿠키어려워서 로컬스토리지로 해결

쿠키 브라우저 저장 이슈 해결

</details>
<br>

# 코드스쿼드

> 페어프로그래밍 방식 결정, npm publish

### 페어 프로그래밍 방식 결정

이번 미션을 진행하면서 `분업과 협업을 어떻게 하면 적절히 할 수 있을까` 고민했다. 다음과 같은 3가지 방법으로 분류하고 각각의 장단점을 파악해봤다.

### `설계`: 로직은 같이 고민하기 (설계, 되도록 정규시간 안에 끝내기)

### `1번`: 각자 한 파트 씩 맡아서 하기

- 언제든지 해볼 수 있음
- 시간은 빠를 수 있음

### `2번`: 두 개를 각각 페어로 하기

- 오래걸림.
- 의견을 주고 받는 과정이 어려움.
- 다들 좋다고 좋다고 하지만 막상하면 확연한 장점을 느끼기 어려움. (미래에 도움되는 느낌?)

### `3번`: 각자 한 파트씩 하다가 서로 하던 작업을 교환해서 해보기

- 현업에서는 새로운 코드를 짜는 일일보다 다른 사람 코드를 수정하는 일이 많다고 하는데 연습 가능
- 서로의 코드를 이해하고 다른 사람이 코드를 잘 이해하고 잘짤 수 있도록 자신의 코드를 의식하여 구현하는 연습 가능
- 1번과 2번의 혼합이라고 생각

이번 프로젝트에서는 핵심로직이 3,4개가 되는데 `누군가 어느 한 파트 맡아서하면 아쉬울 수 있는 부분`이 될 수 있어서 다음과 같은 방법중 `3번`을 선택했다.

**구체적인 방법**

시간단위 끝낼때마다 pull request 보내고 서로 리뷰하고 머지해주기

| 시간단위(예시) | 이든            | 도리            |
| -------------- | --------------- | --------------- |
| 3시간          | 캘린더          | 레인저 슬라이더 |
| 내일 오전까지  | 레인저 슬라이더 | 캘린더          |
| 오늘 오후까지  | 캘린더          | 레인저 슬라이더 |
| 2시간          | 레인저 슬라이더 | 캘린더          |
| 4시간          | 캘린더          | 레인저 슬라이더 |

### react-typescript 컴포넌트 Npm에 올리기

재사용성을 고려해서 npm에 컴포넌트를 올려봤다. 처음 typescript를 사용해보는데 구글링하는데 시간이 오래걸렸다. 아직 npm에 어떤 파일이 올라가고 받아서 사용할 때 어떤 파일을 받아서 사용하는지 파악하지 못했는데 이해봐야겠다.

# 코넥트

> 로그인 유지, 쿠키 브라우저 저장 이슈

### 쿠키 브라우저 저장 이슈

react(localhost: 3000) - spring(localhost: 8080)으로 개발화는 과정에서 spring에서 헤더에 세팅한 set-cookie는 request header에 잘 보이지만 브라우저에서 저장이 안되는 문제를 발견했다. 이후 찾아보니 [쿠키 제한 크롬 정책](https://www.ciokorea.com/news/141970) 때문에 쿠키가 반드시 같은 도메인에서 발급받고 https에서 저장되야 한다고 한다.

문제를 어떻게 해결할까 하다가 **[쿠키가 발급되지 않을 때, Access-Control-Allow-Origin 오류 해결 방법](https://hini7.tistory.com/165)**

에서 `프론트엔드 코드의 credential 옵션과 서버의 credential 옵션을 모두 ON` 해주면 쿠키를 setting 할 수 있다고 해서 문제를 해결했다.

```jsx
// `withCredentials`는 자격 증명(credentials)을 사용하여
// 크로스 사이트 접근 제어(cross-site Access-Control) 요청이 필요한 경우 설정합니다.
withCredentials: false, // 기본 값
```

### 로그인 유지

위의 방법으로 쿠키를 브라우저에 저장했지만 `HttpOnly 속성이 true`이기 때문에 클라이언트 코드에서 브라우저에 저장된 쿠키에 접근할 수 없는 문제가 발생했다. 관련 정보를 이것저것 구글링해보다가 마땅한 해결책을 찾지못했다.

하지만 코넥트 프로젝트에서 로그인이 안되어 지금 거의 4주째 프로젝트 진행이 안되, 로그인이 일단 되게하기 위해 login 이후 받는 `유저 정보를 localstroage에 저장하고 유지하는 차선책`을 선택했다.

이후 쿠키관련 로그인 유지 방법을 정확히 학습하고 `리팩토링`을 반드시 해야겠다.
