# 20220320

# ì½”ë“œìŠ¤ì¿¼ë“œ

> ì´ë¯¸ì§€ ì„œë²„, ESmodule, SSR, prototype, ìƒì†, innerHTML, addEventListner, ë Œë”ë§

ì´ë²ˆ ì½”ë“œìŠ¤ì¿¼ë“œ ë¯¸ì…˜ì€ 2ì£¼ë™ì•ˆ ê°™ì€ ì§„í–‰í•œë‹¤ê³  ë“¤ì—ˆë‹¤. ì´ë²ˆ ì£¼ì—ëŠ” ì¿ íŒ¡ í™ˆí˜ì´ì§€ì˜ ê²€ìƒ‰ì°½ì„ êµ¬í˜„í•˜ëŠ” ë¯¸ì…˜ì´ì—ˆë‹¤. ì–´ë–¤ ì´ë²¤íŠ¸ë¥¼ ì“¸ì§€, ì–´ë–¤ íë¦„ì„ ë¯¸ì…˜ì„ ì§„í–‰í• ì§€ êµ¬ìƒì€ ì‰½ê²Œ í•  ìˆ˜ ìˆì—ˆë‹¤. ëŠ˜ í•˜ë˜ëŒ€ë¡œ ì„¤ê³„ë¥¼ í•˜ê³  í•¨ìˆ˜í˜•í”„ë¡œê·¸ë˜ë°ìœ¼ë¡œ ì½”ë“œë¥¼ êµ¬í˜„í• ê¹Œí•˜ë‹¤ê°€ ì ì‹œ ì‹œê°„ì„ ê°–ê³  ì´ë²ˆ ë¯¸ì…˜ì„ í†µí•´ ë‚´ê°€ ë¬´ì—‡ì„ ì–»ì„ ìˆ˜ ìˆëŠ”ì§€ ê³ ë¯¼í•´ë³´ì•˜ë‹¤. ì¿ íŒ¡í™ˆí˜ì´ì§€ë¥¼ í´ë¡ ì½”ë”©í•˜ê±°ë‚˜ ê²€ìƒ‰ì°½ì„ ë§Œë“œëŠ” ê²ƒì€ ì–¸ì œë“ ì§€ í•  ìˆ˜ ìˆë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ê·¸ë³´ë‹¤ ìƒˆë¡­ê²Œ ë°°ìš´ ì§€ì‹ì„ ì ìš©í•˜ê³  ê¸°ì¡´ì— í–ˆë˜ ë°©ì‹ê³¼ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ë¯¸ì…˜ì„ êµ¬í˜„í•˜ëŠ”ê²Œ ë”ìš± ì˜ë¯¸ìˆë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ì´ì „ê¹Œì§€ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ë§Œ ì‚¬ìš©í–ˆë‹¤ë©´ ì´ë²ˆ ë¯¸ì…˜ì—ëŠ” ê°ì²´ì§€í–¥í˜• í”„ë¡œê·¸ë˜ë°ì„ ì ìš©í•´ë³´ê³ , ìƒˆë¡­ê²Œ ë°°ìš´ prototypeê³¼ ìƒì†ì„ ì´ë²ˆ ë¯¸ì…˜ì—ì„œ ì–´ë–»ê²Œ í™œìš©í•  ìˆ˜ ìˆì„ê¹Œ ê³ ë¯¼í•˜ëŠ” ê³¼ì •ì´ ê²°ê³¼ë³´ë‹¤ ì¤‘ìš”í•˜ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.

`ë¯¸ì…˜ì„ í’€ì…‹ìœ¼ë¡œ í•˜ê¸°ë³´ë‹¤ í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‚˜ ì§‘ì¤‘í•˜ê³  ì‹¶ì€ ë¶€ë¶„(ìš°ì„  ìˆœìœ„)ì„ ì •í•´ë†“ê³  í•˜ì`ë¼ëŠ” ë§ˆìŒê°€ì§ì„ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ íë¦„ì„ ì‘ì„±í•´ë‘ì—ˆë‹¤.

> prototypeìƒì†ì„ ì´ìš©í•œ craí‹€ ë§Œë“¤ê¸° -> ë Œë”ë§ê³¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ -> ì¹´í…Œê³ ë¦¬íƒ­ -> ê²€ìƒ‰ì–´ì°½ -> ìºëŸ¬ì…€ -> ssrë¡œ ì „í™˜ -> webpackì‚¬ìš©

ğŸ¯ ëª©í‘œì˜€ë˜ ê²ƒë“¤

- [x] prototypeì„ í™œìš©í•´ì„œ vanilla jsë¡œ craêµ¬ìƒí•˜ê¸°
- [x] ssrì–´ë–»ê²Œ ê´€ë¦¬ë˜ëŠ”ì§€ (í”„ë¡ íŠ¸ì„œë²„ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ì´í•´)
- [x] moduleê³¼ ì›¹íŒ©(ë°œì „ ê³¼ì •ê³¼ ê°œë… ì´í•´í•˜ê¸°)
- [ ] í† ì´í”„ë¡œì íŠ¸ë¡œ jsì—°ìŠµí•˜ê¸°

ğŸ¤” ì–´ë ¤ì› ë˜ ë¶€ë¶„ë“¤

1. [ê°œë°œì í™©ì¤€ì¼ - Vanilla Javascriptë¡œ ì›¹ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°](https://junilhwang.github.io/TIL/Javascript/Design/Vanilla-JS-Component/): í•´ë‹¹ ë¸”ë¡œê·¸ì™€ ë¦¬ì•¡íŠ¸ íë¦„ì„ ë„ˆë¬´ ë”°ë¼í•˜ì§€ ì•Šì•˜ë‚˜ ì‹¶ë‹¤.

ì–´ë–»ê²Œ í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë Œë”ë§ì„ ê´€ë¦¬í•˜ê²Œ í•  ìˆ˜ ìˆì„ê¹Œ ê³ ë¯¼í•˜ë‹¤ í•´ë‹¹ ë¸”ë¡œê·¸ ê¸€ì„ ë³´ê²Œë˜ì—ˆë‹¤. jsì»´í¬ë„ŒíŠ¸ íë¦„ê³¼ ìƒì†êµ¬ì¡°ê°€ ì´í•´í•˜ê¸° ì‰½ê²Œ ì •ë¦¬ë˜ì–´ ìˆì–´ ì°¸ê³ ë§Œ í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ìœ¼ë¡œ í¬ìŠ¤íŠ¸ë¥¼ ì½ì—ˆë‹¤. ì½”ë“œë¥¼ ì™„ì „íˆ ë³µì‚¬í•˜ê³  ë¶™í˜€ ë„£ì„ ìƒê° ì—†ì´ 'ì´ëŸ° ì•„ì´ë””ì–´ë„ ìˆêµ¬ë‚˜'í•˜ê³  ì°¸ê³ ë§Œ í•  ìƒê°ì´ì—ˆë‹¤.

í•˜ì§€ë§Œ ê±±ì •í•œ ëŒ€ë¡œ `í•´ë‹¹ í¬ìŠ¤íŠ¸ì—ì„œ ì½ì€ ë‚´ìš©`ê³¼ ë‚´ê°€ ì•Œê³  ìˆë˜ spaíë¦„(`ë¦¬ì•¡íŠ¸ ë¼ì´í”„ ì‚¬ì´í´`)ì´ ë¨¸ë¦¬ ì†ì— ê°ì¸ë˜ì–´ ë‚˜ë§Œì˜ ì•„ì´ë””ì–´ë¥¼ ìƒê°í•˜ì§€ ëª»í•˜ê²Œ ë˜ì—ˆë‹¤. ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ê³„ì† ì°¸ê³ í•˜ë©´ì„œ í•˜ì§€ ì•Šì•˜ì§€ë§Œ ì½”ë“œë¥¼ ì§œê³  ë³´ë‹ˆ íë¦„ì´ ë¹„ìŠ·í•´ì„œ ëœ¨ë”í–ˆë‹¤. ë‚˜ë„ ëª¨ë¥´ê²Œ ë¸”ë¡œê·¸ë¥¼ ë”°ë¼í•˜ì§€ ì•Šì•˜ë‚˜ ì‹¶ë‹¤. ì¢€ ë” ê³ ë¯¼í•˜ê³  ë‚˜ë§Œì˜ ì•„ì´ë””ì–´ë¥¼ ì§œëŠ” ì‹œê°„ì„ ê¸¸ê²Œ ê°€ì ¸ì•¼ê² ë‹¤.

2. Html Componentêµ¬ì„± (cra, prototype)

íƒ¬í”Œë¦¿ì„ ë§Œë“¤ê³  ë Œë”ë§í•´ì•¼ê² ë‹¤ëŠ” íë¦„ì€ ì´í•´í–ˆì§€ë§Œ ë¶€ëª¨ìš”ì†Œì— ìì‹ìš”ì†Œë¥¼ ì–´ë–»ê²Œ ë¼ì›Œ ë„£ì–´ì•¼í•˜ëŠ”ì§€ ê°ì´ ì¡íˆì§€ ì•Šì•˜ë‹¤. ë¶€ëª¨ìš”ì†Œì™€ ìì‹ìš”ì†Œ ê°„ì˜ ê´€ê³„ê°€ ì¤‘ìš”í•œ ì´ìœ ëŠ” íŠ¹ì • ìƒíƒœê°€ ë³€í–ˆì„ ë•Œ íŠ¹ì • ìƒíƒœë¥¼ ë Œë”ë§í•˜ëŠ” ìš”ì†Œë§Œ ë¦¬ë Œë”ë§í•´ì•¼í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë¶€ëª¨ìš”ì†Œì— ìì‹1, ìì‹2ê°€ ìˆê³  ìì‹2ì—ì„œ ì“°ëŠ” ìƒíƒœê°€ ë³€í–ˆì„ ë•Œ, ìì‹1ê¹Œì§€ ë‹¤ì‹œ ë Œë”ë§í•˜ì§€ ì•Šê²Œ í•˜ê³  ì‹¶ì—ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ê°€ ì‘ë™í•˜ê¸° ìœ„í•´ 2ë‹¨ê³„(í…œí”Œë¦¿ ì‘ì„± -> ë Œë”ë§)ë¡œ ìƒê°í–ˆë‹¤. ì´ë ‡ê²Œ í•˜ë‹¤ë³´ë‹ˆ ê° ë‹¨ê³„ì—ì„œ í•´ì•¼í•˜ëŠ” ì—­í• ì´ ì»¤ì¡Œë‹¤. ê·¸ë˜ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì„¸ë¶„í™”í–ˆë‹¤.

- `init()`: ë¶€ëª¨ìš”ì†Œë¡œë¶€í„° ë°›ì€ ê°’ì„ ìì‹ ì˜ ìƒíƒœë¡œ ë§Œë“¤ê¸°
- `setEvent()`: ëŸ°ë”ë§ì´í›„ ì´ë²¤íŠ¸ ë“±ë¡.
- `setState()`: ìƒíƒœê°€ ë°”ë€Œë©´ í•´ë‹¹ ìƒíƒœë¥¼ ì“°ëŠ” ì»´í¬ë„ŒíŠ¸ë§Œ render()í˜¸ì¶œ
- `setTemplate() -> render() -> renderChild()`: ìì‹ ì˜ í…œí”Œë¦¿ë§Œë“¤ê¸° -> ê°€ì¥ í° ë³€í™”ê°€ ìˆë˜ ë¶€ë¶„,
  - `insertAdjacentHTML vs innerHTML`: insertAdjacentHTMLì´ ë”ì„ ì‚½ì…í•  ë•Œ ì„±ëŠ¥ì´ ë” ì¢‹ì§€ë§Œ innerHTMLìœ¼ë¡œ í…œí”Œë¦¿ì„ ì§œëŠ”ê²Œ ê°€ë…ì„±ì´ í›¨ì”¬ ì¢‹ì•„ innerHTMLìœ¼ë¡œ í…œí”Œë¦¿ì„ ë§Œë“¤ì—ˆë‹¤.
  - ìì‹ìš”ì†Œì—ì„œ ë¶€ëª¨ë¥¼ ì¸ìë¡œ ë°›ì•„ ë¶€ëª¨ì— ë³¸ì¸ì„ ì‚½ì…í–ˆëŠ”ë°, ë¶€ëª¨ì—ì„œ ìì‹ì„ ì‚½ì…í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë°”ê¿” êµ¬ì¡° íŒŒì•…ì´ ë” ì‰¬ì›Œì¡Œë‹¤.

### `ì´ì „`

```js
export default HtmlElement(htmlTag, $parent){
  this.$element = document.createElement(htmlTag);
}
HtmlElement.prototype.setTemplate = function (){
  $element.classList.add = ".temp"
  $element.id = "#temp"
  $element.innerHtml = ``
}
HtmlElement.prototype.render = function(){
  $parent && $parent.appendchild($element);
}

// ìƒì†ì˜ˆì‹œ
//Section.js
Section.prototype.setTemplate = function () {
  const logoArea = document.createElement('div');
  logoArea.classList.add('logo-area');
  logoArea.insertAdjacentHTML('beforeend', imgTemplate);
  new SearchBox('div', logoArea);
  logoArea.insertAdjacentHTML('beforeend', userInfoTemplate);
  this.$element.appendChild(logoArea);
  new Navigation('nav', this.$element);
};
```

### `ì´í›„`

```js
export default function HtmlElement($element, args) {
  this.$element = $element;
  this.args = args;
  this.state;
  this.init();
  this.render();
  this.setEvent();
}
HtmlElement.prototype.setTemplate = function () {
  return ``;
};
HtmlElement.prototype.renderChild = function () {};
HtmlElement.prototype.render = function () {
  this.$element.innerHTML = this.setTemplate();
  this.renderChild();
};

//Section.js
Section.prototype.setTemplate = function () {
  return `
  <div class="logo-area">
    <div class="search"></div>
  </div>
  <div class="gnb"></div>
`;
};

Section.prototype.renderChild = function () {
  const $gnb = findTargetClassElement(this.$element, 'gnb');
  const $searchBox = findTargetClassElement(this.$element, 'search');
  new SearchBox($searchBox);
  new Navigation($gnb);
};
```

3. ë°ì´í„° ë°”ì¸ë”©

ëª©í‘œ: ë¶€ëª¨ì—ì„œ ë¿Œë ¤ì£¼ëŠ” ê°’ì´ ë³€í•˜ë©´ ìì‹ìš”ì†Œì—ì„œ ì•Œì•„ì„œ ë¦¬ë Œë”ë§ë  ìˆ˜ ìˆë„ë¡ í•˜ê¸°

- 1ë²ˆ: ë¶€ëª¨ìš”ì†Œì—ì„œ this.setState()í•´ë„ ìì‹ìš”ì†Œì— ì“°ëŠ” ìƒíƒœê°€ ë°”ë€Œë©´ ì•Œì•„ì„œ ë°”ë€” ìˆ˜ ìˆë„ë¡ í•˜ê¸°(ì§€ê¸ˆì€ ìì‹ì „ë¶€ë‹¤ ë¦¬ë Œë”ë§)
- 2ë²ˆ: ìì‹ìš”ì†Œë¥¼ ì„ ì–¸í•´ ë†“ê³ , ìì‹ìš”ì†Œ.setState()ë¡œ ë³€ê²½ì„ ê°ì§€í•˜ë„ë¡ í•˜ê³  ìˆìŒ.

```bash
â””â”€â”€ SearchBox
 Â Â  â”œâ”€â”€ AutoComplete.js
 Â Â  â”œâ”€â”€ RecentSearchList.js
 Â Â  â”œâ”€â”€ Selector.js
 Â Â  â””â”€â”€ index.js
```

### 1ë²ˆ

```js
// HtmlElement.js
HtmlElement.prototype.setState = function (newState) {
  this.state = { ...this.state, ...newState };
  this.render();
};

//index.js
SearchBox.prototype.init = function () {
  this.state = {
    showHistroy: true,
    option: 'ì „ì²´',
    inputValue: '',
    recentSearchList: myLocalStorage.get(RECENT_SEARCH_LIST) || [],
    autoSearchList: [],
  };
};

SearchBox.prototype.renderChild = function () {
  const { option, recentSearchList, autoSearchList } = this.state;
  // ìƒëµ
  this.$Selector = new Selector($selector, {
    option,
    changeSearchOption: changeSearchOption.bind(this),
  });
  this.$RecentSearchList = new RecentSearchList($searchRecord, {
    option,
    recentSearchList,
  });
  this.$AutoComplete = new AutoComplete($searchAuto, { autoSearchList });
};

// SearchBox ì¸í’‹ì´ ë°”ë€”ë•Œë§ˆë‹¤ ë¦¬ë Œë”ë§ì´ ì¼ì–´ë‚˜ì„œ render()ì‹¤í–‰í•˜ì§€ ì•Šê²Œ ì˜¤ë²„ë¼ì´ë”©
SearchBox.prototype.setState = function (newState) {
  this.state = { ...this.state, ...newState };
};

// ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ë©´ RecentSearchList.jsì—ì„œë„ ë³€ê²½ë˜ì–´ì•¼í•´ì„œ
function handleSubmit(event) {
  // ìƒëµ
  this.setState({ inputValue: '' });
  this.$RecentSearchList.setState({
    recentSearchList: updatedRecentSearchList,
  });
  this.$input.value = '';
  // ìƒëµ
}

async function handleInput({ target }) {
  // ìƒëµ
  this.$AutoComplete.setState({ autoSearchList: reponseTerms });
  this.setState({ inputValue, autoSearchList: reponseTerms });
}
```

### 2ë²ˆ

```js
SearchBox.prototype.renderChild = function () {
  const { option, recentSearchList, autoSearchList } = this.state;
  // ìƒëµ
  new Selector($selector, {
    option,
    changeSearchOption: changeSearchOption.bind(this),
  });
  new RecentSearchList($searchRecord, {
    option,
    recentSearchList,
  });
  new AutoComplete($searchAuto, { autoSearchList });
};

SearchBox.prototype.setState = function (newState) {
  this.state = { ...this.state, ...newState };
  this.renderChild();
};

function handleSubmit(event) {
  // ìƒëµ
  this.setState({ inputValue: '', recentSearchList: updatedRecentSearchList });
  this.$input.value = '';
  // ìƒëµ
}

async function handleInput({ target }) {
  // ìƒëµ
  this.setState({ inputValue, autoSearchList: reponseTerms });
}
```

# ì½”ë„¥íŠ¸

> ëŒ“ê¸€, ì¢‹ì•„ìš”

ëŒ“ê¸€ê³¼ ëŒ€ëŒ“ê¸€, ì¢‹ì•„ìš” ê¸°ëŠ¥ì„ ì–´ë–»ê²Œ ë§Œë“¤ê¹Œ ê³ ë¯¼í–ˆë‹¤. ëŠ˜ ê·¸ë¬ë“¯ì´ ì¼ë‹¨ êµ¬í˜„í•˜ê³  ì½”ë“œë¥¼ ìˆ˜ì •í•  ìƒê°ì´ì—ˆë‹¤. prê¹Œì§€ ë³´ë‚¸ ì´í›„ì— ì½”ë“œë¥¼ ë‹¤ì‹œ ë³´ë‹ˆ ëŒ“ê¸€ CRUD, ëŒ€ëŒ“ê¸€ CRUDê¸°ëŠ¥ì´ ë¹„ìŠ·í•œë° ë°˜ë³µë˜ëŠ” ì½”ë“œê°€ ìˆì—ˆê³  ì‹¬ì§€ì–´ userëŒ“ê¸€ê³¼ teamëŒ“ê¸€ ê¸°ëŠ¥ì—ì„œ ë˜‘ê°™ì€ ë‚´ë¶€ë¡œì§ì„ ë°˜ë³µí•˜ê³  ìˆì—ˆë‹¤.

ì¶©ë¶„íˆ ëŒ“ê¸€ CRUDë¡œì§, ëŒ€ëŒ“ê¸€ CRUDë¡œì§ì„ í•©ì¹  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ëŠ”ë°, ê·¸ëŸ¬ì§€ ëª»í•´ ì•„ì‰½ë‹¤.

ë¬¼ë¡  ì‹œê°„ì´ ì¶©ë¶„í•˜ë‹¤ë©´ ì²œì²œíˆ ì„¤ê³„í•˜ê³  ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ì§€ë§Œ ì‹œê°„ì€ ëŠ˜ ë¶€ì¡±í•˜ê¸° ë•Œë¬¸ì— í•œ ë²ˆ ì½”ë”©í•  ë•Œ ì„¤ê³„ì— ì¶©ë¶„íˆ ì‹œê°„ì„ ì¨ì„œ ë” ë‚˜ì€ êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ì•¼ í•  ê²ƒ ê°™ë‹¤.
