# 20220314

# 코드스쿼드

> 프로퍼티 속성, 객체, es module, 빌드툴, ssr, 이미지 서버

### 이미지 서버

미션을 진행하면서 이미지를 어떻게 처리해야하나 고민이 들었다. 지금은 이미지가 몇 개 없고 작아서 상관없지만 쿠팡처럼 이미지가 많거나 이미지가 적어도 크기가 큰 이미지를 다운받아야하는경우 이미지를 직접 db에 저장해서 쓰기보다 이미지서버를 활용하는게 좋다고 했다. 그런데 쿠팡에서 사용한 이미지 서버 url을 복사해서 쓸려니까 403 (다른 도메인에서 호출)에러가 발생했다. 어쩔 수 없이 일단 images폴더를 이미지를 직접 저장해서 사용하다가 이후 다시 이미지 서버 url 쓰니까 에러가 나지 않았다. 생각해보면 이미지 서버도 어쨌든 하나의 서버인데 아무나 접근가능하게 하면 손해아닌가? cors걸어둬야 하는거 아닌가 싶다.

### ESmodule

이전까지 동작과정은 모르고 썼던 export import, require에 대해서 공부했다. 구성 -> 인스턴스화 -> 평가 3단계 중 평가 부분이 제일 어렵다고 느꼈다. 구성과 인스턴스는 대략적은 흐름을 머릿속에서 그리고 설명할 수 있다면 평가는 직접적으로 메모리와 연관되어 실행 직전 구체적화하는 단계여서 설명하기 어려운 것 같다.

ES모듈과 CommonJS모듈 사이에 차이가 있던데, nodejs와 es6차이점을 알 수 있었다.

### SSR

react를 사용하면서 CRA와 api서버로 분리된 구조만 생각했었다. SSR라 하면 api서버에서 템플릿 렌더링도 진행하는 줄 알았다. 그래서 프론트에서 역할이 줄어든다고 생각했는데 왜 프론트에서 힐 일이 많아진다고 하지?라는 의문을 갖고 있었다. 이번에 naver.d2의 [어서 와, SSR은 처음이지? - 도입 편](https://d2.naver.com/helloworld/7804182)를 읽고 어느 정도 궁금증이 해소되었다.

이전까지 프론트도 하나의 서버라는 것을 잊고 있어서 헷갈렸던 것 같다. 프론트를 백에 종속적인 관계로 배포하는 것이 아니라 독립적으로 배포하는 경우를 생각해보자. react를 사용하는 경우 CRA를 한다고 서버가 없는 것이 절대 아니다. 빌드된 파일을 heroku든, s3든 서버에 올려야 접근가능하고, 다만 해당 서버는 정적 파일만 전달할 뿐이다. SSR은 얼핏보면 프론트를 백에 종속적인 관계로 배포하는 것으로 보인다. 하지만 api서버는 따로 있고, 프론트 탬플릿을 렌더링하는 서버(nodejs)는 정적파일을 올리는 서버에 함께 올린다.
