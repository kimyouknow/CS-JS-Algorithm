# 01 - 댓글,이미지업로드,코드품질

# 코드스쿼드

---

## 1\. 관심사 분리 js로 구현

- model과 view에 대한 고민 추가
- 각 컴포넌트마다 가지고 있는 store를 한 번에 관리할 수 있을까?
- cf> mount의 의미: In computers, to mount is **to make a group of files in a file system structure accessible to a user or user group**

## 2\. 코드 품질

> 도리의 코드를 보니 ecmascript에 class를 만들기 참 잘한 것 같다는 생각이 들기도 했고,  
> 많이 보던 코드의 느낌이 아니라서, 어색해서 이게 제가 제대로 리뷰를 하고 있는지 의심이 들기도 했어요.  
> 아마 제가 그렇게 느꼈다면, 다른 fe 개발자도 비슷하게 느낄 수 있다고 생각해요.  
> 이게 무슨 의미일지 조금 고민해보면서 이번 리뷰를 확인해보셨으면 좋겠어요.  
> 리뷰를 마칩니다!

이번 미션을 pr로 받은 코멘트다. 코멘트를 보고 내 코드를 다시 생각해보는 시간을 가졌다. 함수의 prototype을 연습하고 싶어 es6 class를 쓰지 않았지만, 단순히 es6 class를 사용한다고 리뷰어님이 느낀 부분이 해결되진 않을 것 같다는 생각이 들었다. 다른 사람이 쉽게 이해할 수 있는 코드, 제 의도가 보이는 코드.,, 이런 느낌일까? 이번 pr의 목적을 `기능을 추가하거나 삭제해도 수정을 최소화할 수 있고, 다른 사람이 이해할 수 있게 코드를 써야한다.` 라고 두었는데 리뷰어의 코멘트를 보고 다시 생각하게 되었다.

ko.javascript.info 사이트에서 코드 품질에 관한 글을 읽고, cleancode javascript 한국어판 버전을 읽었다. 다 아는 내용이었고, 늘 생각하면서 코드를 짰는데 뭐가 문제였을까?

내 의도를 어떻게 코드에 반영할 수 있을까 고민을 많이해봤지만 마땅한 해결책을 찾지 못했다.

코딩은 글쓰기와 비슷한 점이 많다. 틀을 잡고 설계하는 시간이 오래걸리고, 수정하는 시간이 쓰는 시간보다 더  필요하다. 내 의도를 잘 반영해야하는 점에서 비슷한 점이 늘었다.

## 3\. class 공부

class 기본 문법에 대해 prototype과 관련해서 공부했다. 내부동작을 이해하려고 노력했다.

# 코넥트

---

## 1.  rebase , push --force

- 레포 관리
- 뻘짓하면서 rebase에러 수정함.

## 2\. 댓글 관련 고민

> 요약  
> 1. 댓글 조회API를 팀이나 유저 게시글 조회API랑 분리  
>  2.댓글 API(팀, 유저)를 하나로 합치자

### 현재

---

1. 반복되는 로직이 많다.
2. (프론트만 해당) user/team store가 크다.

- API: 같은 로직이 두 번씩 반복되고 있음.

  - GET: /user/:id → 유저 게시글 정보 + 게시글 댓글
  - GET: /team/:id → 팀 게시글 정보 + 게시글 댓글
  - 팀 댓글: POST ,PATCH, DELETE
  - 팀 대댓글: POST ,PATCH, DELETE
  - 유저 댓글: POST ,PATCH, DELETE
  - 유저 대댓글: POST ,PATCH, DELETE

- 프론트

  - user: user 게시글 데이터 + user 게시글 댓글 데이터

  - team: team 게시글 데이터 + team 게시글 댓글 데이터

- 서버

  - 팀, 유저 로직 반복

### 원하는 방향

---

- API:

  - GET: /user/:id → 유저 게시글 정보

  - GET: /team/:id → 팀 게시글 정보

  - 댓글: GET, POST, PATCH, DELETE

  - 대댓글: POST,PATCH, DELETE

- 프론트

  - user: user 게시글 데이터
  - team: team 게시글 데이터

  - comment: comment 데이터

- 서버

  - 서버쪽에서는 댓글 GET api를 분리하는 거랑 댓글이랑 대댓글 API를 합치는 데에는 문제가 없음
  - 팀 댓글과 유저 댓글을 합치는 거는 팀 id와 유저 id를 구분해야 하는 문제가 있어서 좀 더 고민

## 3\. 이미지 업로드 관련 고민

---

> 프론트에서 이미지 서버에 직접 파일을 업로드하고 받은 아이디를 서버에게 전달

### 현재

프론트에서 파일 업로드 → /upload 경로의 api로 서버에 요청 → 서버에서 s3이미지서버에 업로드 후 아이디 response로 보내줌 → 프론트에서 response를 받고 form 전체 제출할 때 이미지 파일의 아이디를 포함해서 서버로 제출

### 원하는 방향

프론트에서 파일 업로드 → s3 이미지 서버에 업로드 후 아이디를 받음 → form 전체 제출할 때 이미지 파일의 아이디를포함해서 서버로 제출
