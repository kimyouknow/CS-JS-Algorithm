# 20220614

<details>
<summary>시간대별 정리</summary>

### 아침

프론트에서 TDD

### 오전

6월 1주차 주간회고 작성

storybook 적용

### 오후

스토리 설계

데이터요청을 어떻게 할지

### 저녁

</details>
<br>

# 코드스쿼드

> 서버 상태 최신화 방법 고민

### 여러 목록에 대해 추가/수정/삭제 요청(서버 상태 update) 이후 최신화를 어떻게 할지

이번 프로젝트 요구사항을 확인하면서 어떠한 서버상태의 추가/수정/삭제 작업 후 서버의 최신화된 상태를 다시 받아와야하는 경우가 많을 것 같다고 생각했습니다.

위 작업에 대해서 아래와 같이 3가지 방법을 생각해봤는데 백엔드 팀원과 함께 각각의 장단점을 비교해본 후 1`번 방식을 사용하기로 결정`했습니다. 프론트에서 위와같은 상황이 자주 있을 것 같은데 혹시 리뷰어분께서는 아래 방식들에 대해 어떻게 생각하시는지 궁금합니다.

1번을 선택한 이유는 단점인 두번의 네트워크 요청이 큰 단점은 아니라고 생각했고 react-query를 공부해본건 아니지만 이번 미션에서 사용할 상태관리 라이브러리를 선택하기 위해 여러 정보를 찾아보던 중

react-query의 장점으로 `get을 한 데이터에 대해 update를 하면 자동으로 get을 다시 수행한다. (예를 들면 게시판의 글을 가져왔을 때 게시판의 글을 생성하면 게시판 글을 get하는 api를 자동으로 실행 )` 라는 [글](https://kyounghwan01.github.io/blog/React/react-query/basic/#react-query-장점)을 보게되어

프론트에서 서버 데이터를 update 후 다시 get하는 작업이 자주 발생하는 상황이어서 해당 작업을 편하게 해주는 위와같은 라이브러리가 만들어진것이 아닐까? 라고 생각해 1번 방식을 사용하기로 결정했습니다.

1. **추가/수정/삭제 요청 → 서버에서 성공 메세지 받기 (별도의 데이터는 받지 않음) → 다시 get 요청해서 목록 전체 받기**

장점

- 프론트에서 로컬 데이터를 최신화 로직을 줄일 수 있다.
- 서버상태를 확실하게 반영할 수 있다.
  단점
- 하나의 액션에 네트워크 요청이 두 번 필요하게 됨.

1. **추가/수정/삭제 요청 → 해당요청의 응답으로 최신화된 목록 전체 받기**

   장점:

   - 프론트 로직이 줄어들고
   - 서버상태를 확실하게 반영할 수 있다.

   단점:

   - 상태를 다 바꿔서 모두 렌더링

**3. 추가/수정/삭제 요청 → 서버에서 바뀐 데이터 값만 전달 → 프론트에서 바뀐 데이터를 골라서 반영**

장점

- 한번의 요청으로 해결 가능
- 모든 UI를 리렌더링할 필요 없이 바뀐 부분만 리렌더링하면 된다.

단점

- 프론트에서 별도의 업데이트 로직을 구현해야함
- 여러 클라이언트에서 동시에 추가/수정/삭제 요청이 일어날 때 특정 클라이언트에서 적절하게 반영하기 어렵다.
