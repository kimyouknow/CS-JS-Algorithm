# 20220725

<details>
<summary>시간대별 정리</summary>

### 오후

회고작성

연결리스트 add메서드 with test code

자바르스크립트 난수 생성

tsoa

- 제대로 안 됨
- 사용할려면 ts decorator에 대한 학습이 필요할 듯
- 자동생성기를 적용하기 전에 주석으로 수동으로 작성해보자

### 저녁

코넥트

- 문제 정리

</details>
<br>

# 이번 주 스프린트

- [ ] 연결리스트 구현 (with ts, jest)
- [ ] 이슈트래커 api 명세구현
- [ ] docker 학습 및 aws 배포
- [ ] 자동 배포

# 개인공부

주말동안 회고를 작성하지 못해 오전에 밀린 회고를 작성했다.

생각보다 지난 주에 한 게 없고, 겉핥기식으로 코딩한 느낌이 들었다.

공부해보고 싶은 내용은 많은데 전부 다 할 수 없으니 한 주 단위로 그 주에 꼭 끝내야하는 일을 정해서 진행해야겠다.

## 연결리스트 add메서드 with test code

[https://gist.github.com/kimyouknow/06b23b748111eb2b3112f44f3076ebd8](https://gist.github.com/kimyouknow/06b23b748111eb2b3112f44f3076ebd8)

연결리스트 add메서드를 테스트코드와 함께 구현했다. 구현하면서 다음과 같은 고민을 했다. 리뷰를 받거나 같이 고민할 사람이 없어서 어렵게 느껴진다.

### 각각의 테스트 코드가 독립적인가?

**it끼리 독립적이게 만들어야할 것 같다.**
그런데 it끼리 독립적이다보면 반복되는 코드가 많아지는데, 반복되는 코드를 어떻게 처리할까?
예를 들어, it마다 다음과 같은 로직이 비슷하게 반복되는데 가짜 mock을 어떻게 만들어야할까?

```jsx
인스턴스를 생성
인스턴스.add에 mock데이터 넘겨주기
인스턴스.size 확인
인스턴스.head 확인
```

**원래코드와 독립적이어야할 것 같다.**
아래의 코드와 같이 원본 코드의 class를 그대로 가져다 쓰니 add같은 함수를 사용할 때 테스트 로직에서 실행한 메서드가 원래 코드에 영향을 끼치는 문제가 발생했다. 우선 각 테스트마다 독립적으로 인스턴스를 만들어서 해당문제를 해결했다.

```jsx
import { SignleLinkedList } from './app';

// 예시
let instance;
beforeEach(() => {
  intance = new SingleLinkedList();
});
```

## 자바르스크립트 난수 생성

mdn문서에 따르면 Math.random()은 암호학적으로 안전한 난수를 생성해주지 않는다. 따라서 프로그램의 보안과 관련된 로직에서는 해당 api를 사용하지 않는 것이 좋다. 특정 범위의 랜덤한 숫자를 생성하는 다양한 방법이 있지만, 사실 **`Math.random()`**은 실제로 랜덤한 숫자롤 생성한다고 보기 어렵다. 이는 **[유사 난수](https://ko.wikipedia.org/wiki/%EC%9C%A0%EC%82%AC%EB%82%9C%EC%88%98)** 이기 때문이다. 알려진 것 처럼, **[컴퓨터로 유사 난수가 아닌 진짜 난수를 생성하는 것은 어렵다.](https://en.wikipedia.org/wiki/Random_number_generation#Computational_methods)**

mdn은 그 대안으로 [Web Crypto API](https://www.w3.org/TR/WebCryptoAPI/) 를 만들어 소개한다.

그 외 유명한 라이브러리로는

- **[random-number-csprng](https://www.npmjs.com/package/random-number-csprng)**
- API Key, 토큰에는 **[uuid](https://www.npmjs.com/package/uuid)**, **`uuid.v4`**

가 있다.

출처: [https://yceffort.kr/2021/09/javascript-random-number](https://yceffort.kr/2021/09/javascript-random-number)

## express swagger 자동생성기

swagger에 대한 문서 정리 방법을 찾아보기 전 여러 가지 자동생성기툴을 찾아봤다. tsso, auto-generator 등등 다양한 라이브러리들을 설치해봤는데 제대로 설치되지 않았다.

마음이 급해 제대로 설치되지 않았다. 사용하기 전 swagger문서 양식이나 각 라이브러리들마다 사용하는 기술(decorator)에 대한 공부를 미리 했어야하는데 스스로 정한 데드라인에 쫓겨 구현하는데 급급했던 것 같다.

내일 자동생성기를 적용하기 전에 주석을 활용해서 수동으로 작성해봐야겠다.

# 코넥트

전체적으로 프론트 코드에 대한 고민보다는 협업과 배포에 대한 고민을 많이했다. 취업을 위해 알고리즘공부나 자바스크립트 구현과 같은 프론트 관련 공부를 더 집중해서 해야하나 하는 의구심이 많이 들었다. 하지만 8월까지 사이드 프로젝트로 백엔드 관련된 간단한 배포 및 흐름, api 서버 구현 및 백로그 관리방법까지 공부하기로 했으니까 집중해서 해볼 계획이다.

## 체계화된 백로그 관리 및 회의록,정리록 필요성

백앤드와 연결을 제대로 시작하면서 여러 가지 오류가 발생했다. 대부분의 데이터 타입이 api명세와 맞지 않았고, 로그인 흐름, 배포 등등 해결해야할 문제가 너무 많았다.

```
“유저목록을 조회하는 api에서 500에러가 뜨거나 spring로그인하라는 html이 response로 오는데?”
```

처음엔 간단한 서버 에러인줄 알았다. 실제 위의 문제는 spring에서 모든 api요청에 access token이 필요하게 설정했기 때문에 발생한 문제였다.

```
'그렇다면 해당 api는 public하게 하면 되겠네. 그런데 우리 API인증여부(접근권한) 정리해둔 내용이 있나?'
```

없었다. 페이지별 핵심기능과 API명세를 노션에 정리해뒀지만 마지막 업데이트가 거의 한 달이 다 된 문서였다.

```
'그런데 우리 로그인 이후에 access token은 어디에 주기로했지?, 우리 로그인 흐름 바꾸지 않았어?'
```

분명 얘기하고 어딘가에 정리했지만 한 번에 찾기 어려웠다. `회의록`과 `정리록`을 구분할 필요를 느꼈다.

```
'역시, 체계화된 문서정리가 필요해....'
```

새롭게 디자이너분이 오시기도 했고, 프론트 파트는 따로 renewal하면서 새롭게 문서정리를 하고 있어, 프로젝트 전체용 문서정리도 다시 하기로했다.

## 배포 공부

현재 백엔드가 구현한 배포 흐름은 다음과 같다. 내가 찾아보진 않았지만 대략적으로 백엔드가 설명한 내용을 정리하자면

```jsx
ec2에서 docker위에 jenkins으로 자동배포 프로그램 실행 중
github release 브랜치에 push하면 자동으로 ec2에 신호가 감 → 해당 remote에서 프론트, 서버가 동시에 빌드
But, 지금 상황 : 프론트 폴더에서 메모리 부족으로 에러가남
npm install → npm build (빌드 할 때 터짐)
```

백엔드는 해결책으로 정적사이트를 따로 배포하면 어떨까 제안했지만 내가 아직 배포 과정과 배포환경을 제대로 이해하지 못해서 공부한 뒤에 문제를 해결해보자고 했다.
